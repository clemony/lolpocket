@import 'tailwindcss';
@import '../theme.css';
@plugin "daisyui";

@utility fx-0 {
  --noise: 0;
  --depth: 0;
}

@utility fx-1 {
  --noise: 0.7;
  --depth: 1;
}

/* input */

@utility input {
  --input-color: var(--b3);
}

/* divider */

@utility divider {
  @apply h-px text-2 font-semibold opacity-50;
}

/* badge */

@utility badge {
  @apply rounded-lg shadow-sm shadow-black/2 text-2 px-2 flex gap-2 dst items-center  box-border;
}

@utility badge-neutral {
  @apply text-nc bg-neutral;
}

@utility badge-default {
  @apply bg-b1/94 backdrop-blur-sm border-b4/70  text-bc;
}

/* chkbx */

@utility checkbox {
  &::before {
    clip-path: polygon(26.6% 50%, 46.6% 66.6%, 73.3% 33.3%);
  }
}
@utility checkbox-neutral {
  @apply border-b4 inset-shadow-none;
}
@utility checkbox-sm {
  @apply rounded-[3.5px];
}

@utility checkbox-xs {
  @apply rounded-[3.5px];
}

/*  btn */

@utility btn {
  @apply font-normal px-3 text-3 gap-3 items-center bg-transparent;
}

/* chat */

@utility chat-header {
  @apply text-1 px-2 !leading-0 translate-y-0.75;
}
@utility chat-footer {
  @apply !text-1 px-2 !leading-0 -translate-y-2.75;
}

@utility chat-bubble {
  @apply bg-b2;
  &::before {
    @apply scale-y-250 scale-x-200  -translate-y-[6.5px] translate-x-1;
  }
}

/* tooltip */

@utility tooltip {
  --tt-bg: --alpha(var(--color-b1) / 99%) !important;
}
@utility tooltip {
  @apply relative;

  &::before {
    @apply z-50 py-1.5 px-3 text-2 border-b3 text-bc max-w-64 whitespace-pre-wrap drop-shadow-sm transition-all duration-300 leading-5.5 text-start bg-[var(--tt-bg)];
  }

  &::after {
    @apply hidden;
  }
}

@layer components {
  /* field  */

  .field {
    @apply fieldset mt-2 relative w-full h-fit bg-b2 border border-b3/60 p-4 rounded-box;
  }

  .field-legend {
    @apply fieldset-legend absolute left-5.5 -top-5 text-3 max-w-64  max-h-12;
  }

  .field-box {
    background: url('../icons/ui/noise.svg');
    @apply shadow-warm-soft overflow-visible border bg-size-[160px] bg-b2/40 bg-repeat  drop-shadow-xs border-b3/60 rounded-xl **:select-none text-2   relative;
  }

  /* progress */

  .progress {
    @supports (-webkit-appearance: none) {
      &::-webkit-progress-value {
        @apply rounded-xl;
      }
    }
  }

  .progress&::-webkit-progress-value {
    border-radius: var(--rounded-xl) !important;
  }

  /* stat display  */

  .stats {
    .stat {
      @apply items-center;
    }

    .stat-title {
      @apply !text-3 font-semibold  drop-shadow-[1px_0px_0px_#00000020];
    }

    .stat-desc {
      @apply !text-2 font-medium  drop-shadow-[1px_0px_0px_#00000020];
    }

    .stat-figure {
      @apply drop-shadow-[1px_0px_0px_#00000020];
    }

    .stat-value {
      @apply drop-shadow-[1px_0px_0px_#00000020];
    }
  }
}

/* config */

@plugin "daisyui" {
  root: ':root';
  themes: lofi;
  styled: true;
}

@plugin "daisyui/theme" {
  name: 'lofi';
  default: true;
  prefersdark: true, false;
  color-scheme: dark, light;
  styled: true;

  --color-base-100: var(--b1);
  --color-base-200: var(--b2);
  --color-base-300: var(--b3);
  --color-base-content: var(--bc);
  --color-primary: var(--n1) !important;
  --color-primary-content: var(--nc);
  --color-secondary: var(--n1) !important;
  --color-secondary-content: var(--nc);
  --color-accent: var(--n1) !important;
  --color-accent-content: var(--nc);
  --color-neutral: var(--n1) !important;
  --color-neutral-content: var(--nc);
  --color-info: var(--sorcery);
  --color-info-content: #000000;
  --color-success: var(--resolve);
  --color-success-content: #000000;
  --color-warning: var(--precision);
  --color-warning-content: #000000;
  --color-error: var(--domination);
  --color-error-content: #000000;
  --input-color: var(--color-b3);
  --tabcontent-radius-ss: var(--rounded-xl);
  --tabcontent-radius-se: var(--rounded-xl);
  --tabcontent-radius-es: var(--rounded-xl);
  --tabcontent-radius-ee: var(--rounded-xl);

  --radius-selector: 0.4rem;
  --radius-box: 1rem;
  --radius-field: 0.55rem;
  --depth: 1;
  --noise: 0.8;
}

.tabs-lift-start {
  @layer daisyui.modifier {
    --tabs-height: auto;
    --tabs-direction: column;
    --border: 2px;

    > .tab {
      /* ⤷ Inactive state: borders are transparent */
      --tab-border: var(--border) 0 var(--border) var(--border);
      --tab-border-colors: #0000 #0000 #0000 #0000;
      --tab-radius-ss: min(var(--radius-field), var(--tab-radius-min)); /* top-left */
      --tab-radius-se: 0; /* top-right */
      --tab-radius-es: min(var(--radius-field), var(--tab-radius-min)); /* bottom-left */
      --tab-radius-ee: 0; /* bottom-right */
      --tab-paddings: var(--tab-p) var(--border) var(--tab-p) 0;

      border-width: var(--tab-border);
      border-color: var(--tab-border-colors);
      border-radius: var(--tab-radius-ss) var(--tab-radius-se) var(--tab-radius-ee) var(--tab-radius-es);
      padding: var(--tab-paddings);
      position: relative;
      background-color: transparent;

      /* ⤷ Active state: visible borders, mask corners */
      &:is(.tab-active, [aria-selected='true'], [aria-current='true'], [aria-current='page']),
      &:is(input:checked, label:has(:checked)) {
        --tab-border-color: color-mix(in lch, var(--color-b3) 100%, #ffffff 2%);
        background-color: var(--tab-bg);
        border-color: var(--tab-border-color);

        border-top-width: var(--border);
        border-right-width: 0;
        border-bottom-width: var(--border) !important;
        border-left-width: var(--border);

        border-top-color: var(--tab-border-color);
        border-bottom-color: var(--tab-border-color);
        border-right-color: #0000;
        border-left-color: var(--tab-border-color);

        --tab-paddings: calc(var(--tab-p) - var(--border)) 0 calc(var(--tab-p) - var(--border)) var(--border);
        --tab-inset: 0 auto 0 auto;
        --tab-grad: calc(69% - var(--border));

        --tab-corner-width: min(var(--radius-field), var(--tab-radius-min));
        --tab-corner-height: calc(100% + min(var(--radius-field), var(--tab-radius-min)) * 2);
        --tab-corner-position: top left, bottom left;

        --radius-start: radial-gradient(
          circle at top left,
          #0000 var(--tab-grad),
          var(--tab-border-color) calc(var(--tab-grad)),
          var(--tab-border-color) calc(var(--tab-grad) + var(--border)),
          var(--tab-bg) calc(var(--tab-grad) + var(--border))
        );
        --radius-end: radial-gradient(
          circle at bottom left,
          #0000 var(--tab-grad),
          var(--tab-border-color) calc(var(--tab-grad)),
          var(--tab-border-color) calc(var(--tab-grad) + var(--border)),
          var(--tab-bg) calc(var(--tab-grad) + var(--border))
        );

        &:before {
          content: '';
          display: block;
          position: absolute;
          height: var(--tab-corner-height);
          width: var(--tab-corner-width);
          background-position: var(--tab-corner-position);
          background-image: var(--radius-start), var(--radius-end);
          background-size: var(--tab-corner-width) var(--tab-corner-width);
          background-repeat: no-repeat;
          right: 0;
          top: calc(-1 * var(--tab-corner-width));
          bottom: calc(-1 * var(--tab-corner-width));
          z-index: 1;
        }

        &:first-child:before {
          --radius-start: none;
        }

        &:last-child:before {
          --radius-end: none;
        }
      }
    }

    > .tab-content {
      --tabcontent-margin: 0 0 0 calc(-1 * var(--border));
      --tabcontent-radius-ss: 0;
      --tabcontent-radius-se: var(--radius-box);
      --tabcontent-radius-es: var(--radius-box);
      --tabcontent-radius-ee: var(--radius-box);
      order: 1;
    }
  }
}
